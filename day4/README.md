
python之计算器操作（第四天）

作业：
   
  使用正则表达式和递归实现计算器功能。

 实现：
  
  1、实现带括号的计算
  2、实现指数、加减乘除求余等功能

一、实例说明：

本实例自己写了个版本，但依旧存在一点bug，例：-2-2等计算问题，故最后在武SIR的代码基础上加了指数、求余等功能。

该计算器思路：
1、递归寻找表达式中只含有 数字和运算符的表达式，并计算结果
2、由于整数计算会忽略小数，所有的数字都认为是浮点型操作，以此来保留小数
使用技术：
1、正则表达式
2、递归


此程序在python2.7和python3.4下无太差别，故只此一个版本。

二、执行流程如下：

******************** 请计算表达式： 1 - 2 * ( (60-30 +(-40.0/5) * (9-2*5/3 + 7 /3*99/4*2998 +10 * 568/14 )) - (-4*3)/ (16-3*2) ) ********************
before： ['1-2*((60-30+(-40.0/5)*(9-2*5/3+7/3*99/4*2998+10*568/14))-(-4*3)/(16-3*2))']

-40.0/5=-8.0

after： ['1-2*((60-30+-8.0*(9-2*5/3+7/3*99/4*2998+10*568/14))-(-4*3)/(16-3*2))']

========== 上一次计算结束 ==========

before： ['1-2*((60-30+-8.0*(9-2*5/3+7/3*99/4*2998+10*568/14))-(-4*3)/(16-3*2))']

9-2*5/3+7/3*99/4*2998+10*568/14=173545.880953

after： ['1-2*((60-30+-8.0*173545.880953)-(-4*3)/(16-3*2))']

========== 上一次计算结束 ==========

before： ['1-2*((60-30+-8.0*173545.880953)-(-4*3)/(16-3*2))']

60-30+-8.0*173545.880953=-1388337.04762

after： ['1-2*(-1388337.04762-(-4*3)/(16-3*2))']

========== 上一次计算结束 ==========

before： ['1-2*(-1388337.04762-(-4*3)/(16-3*2))']

-4*3=-12.0

after： ['1-2*(-1388337.04762--12.0/(16-3*2))']

========== 上一次计算结束 ==========

before： ['1-2*(-1388337.04762--12.0/(16-3*2))']

16-3*2=10.0

after： ['1-2*(-1388337.04762--12.0/10.0)']

========== 上一次计算结束 ==========

before： ['1-2*(-1388337.04762--12.0/10.0)']

-1388337.04762--12.0/10.0=-1388335.84762

after： ['1-2*-1388335.84762']

========== 上一次计算结束 ==========

三、流程图如下：

![image](https://github.com/ButBueatiful/dotvim/raw/master/screenshots/vim-screenshot.jpg)
